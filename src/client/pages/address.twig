{% extends "./layout.twig" %}
{% set page = 'address' %}

{% block page %}{{page}}{% endblock %}

{% block title %}
    {% verbatim %}
        {{title}}
    {% endverbatim %}
{% endblock %}

{% block meta %}
    <meta name="referrer" content="never" />
    <meta name="referrer" content="no-referrer" />
    <meta name="description" content="" />
{% endblock %}

{% block head %}
{% verbatim %}
    {% if address %}
    <script>
        var ethplorerWidgetPreload = [
            {
                method: 'getPriceHistoryGrouped',
                options: {
                    address: '{{ address }}',
                    withEth: Boolean("{{ withEth|escape('js') }}"),
                }
            }
        ];
    </script>
    {% endif %}

    {{ head|raw }}
{% endverbatim %}
{% endblock %}

{% block jsExtensions %}
<script src="https://www.google.com/jsapi"></script>
{% endblock %}

{% block scripts %}
{% verbatim %}
    <script>
        var __ETH_DEBUG__ = Boolean("{{ debugEnabled|escape('js') }}");
        var __ETH_DEBUG_ID__ = "{{ debugId|escape('js') }}";
        {{ scriptAddon|raw }}
    </script>
{% endverbatim %}
{% endblock %}

{% block content %}
    <div class="container">
        {% include '@components/adsbygoogle.twig' %}
    </div>

    {% verbatim %}
    <div id="page-create" class="container mb-5 page">
                {{ ads|raw }}

                {% if error %}
                <div id="error" class="content-page text-center">
                    <h1 class="text-danger">ERROR</h1>
                    <h3 id="error-reason" class="text-danger">Invalid request</h3>
                </div>
                {% else %}
                <div id="loader" class="text-center">
                    <div class="loader-wrapper">
                        <div class="dot-loader">
                            <div class="dot"></div>
                            <div class="dot"></div>
                            <div class="dot"></div>
                        </div>
                    </div>
                    <div id="searchInProgressText">search in progress...</div>
                </div>

                <div id="error" class="content-page text-center">
                    <h1 class="text-danger"></h1>
                    <h3 id="error-reason" class="text-danger"></h3>
                </div>

                <div id="error-with-details" class="content-page text-center">
                    <div class="ethplorer-panel">
                        <h3 class="text-danger error-title"></h3>
                        <div class="error-details"></div>
                    </div>
                </div>

                <div class="row">
                    <div class="col mb-4">
                        <h1 id="ethplorer-path" class="text-dark m-0 mt-2">
                            {{ header|raw }}
                        </h1>
                    </div>
                </div>

                <div class="clearfix"></div>

                {% if testWidget %}
                    <script type="text/javascript">
                        var testWidget = true;
                    </script>
                {% else %}
                    <script type="text/javascript">
                        var testWidget = false;
                    </script>
                {% endif %}

                <div id="widget-block" style="display:none;" class="row">
                    <div class="col token-price-history-grouped-widget mb-4">
                        <div id="token-price-history-grouped-widget"></div>
                    </div>
                </div>

                <script type="text/javascript">
                    if(typeof(eWgs) === 'undefined'){ var eWgs = []; }
                </script>
                <div class="row">
                    <div class="col">
                        <h1 id="ethplorer-alert"></h1>
                    </div>
                </div>

                <div id="txDetails" class="content-page">
                    <div class="row mb-5">
                        <div class="col multiop">
                            <div class="block">
                                <div class="block-header text-dark">
                                    <h3 class="h4">Internal operations</h3>
                                </div>
                                <div class="scrollable"><div class="scrollwrapper"><table class="table m-0"></table></div></div>
                            </div>
                        </div>
                    </div>

                    <div class="row mb-4">
                        <div class="col col-md-12 col-lg-6 chainy mb-4">
                            <div class="block">
                                <div class="block-header text-dark">
                                    <h3 class="h4">
                                        <a href="/address/0xf3763c30dd6986b53402d41a8552b8f7f6a6089b" class="text-dark text-decoration-none mr-1">Chainy</a>
                                        <span id="chainy-op"><span>
                                    </h3>
                                </div>
                                <table class="table m-0">
                                <tr>
                                    <td>URL</td>
                                    <td id="chainy-url" class="list-field"></td>
                                </tr>
                                <tr>
                                    <td>SHA256 Hash</td>
                                    <td id="chainy-hash" class="list-field"></td>
                                </tr>
                                <tr>
                                    <td>Filename</td>
                                    <td id="chainy-filename" class="list-field"></td>
                                </tr>
                                <tr>
                                    <td>Filesize</td>
                                    <td id="chainy-filesize" class="list-field"></td>
                                </tr>
                                <tr>
                                    <td>Data</td>
                                    <td id="chainy-message" class="list-field" style="white-space: normal !important;"></td>
                                </tr>
                                <tr class="blue">
                                    <td>Short Link</td>
                                    <td id="chainy-link" class="list-field"></td>
                                </tr>
                                </table>
                            </div>
                            <div class="text-center">
                                <a class="tx-details-link text-decoration-none">Transaction details</a>
                            </div>
                        </div>

                        <div class="col col-md-12 col-lg-6 token-related mb-4" id="token-operation-block">
                            <div class="block">
                                <div class="block-header text-dark">
                                    <h3 class="h4">
                                        <span class="token-name mr-1"></span>
                                        <span class="token-operation-type"></span>
                                    </h3>
                                </div>
                                <table class="table m-0">
                                <tr class="blue">
                                    <td>Value</td>
                                    <td id="transfer-operation-value" class="list-field"></td>
                                </tr>
                                <tr class="blue">
                                    <td>Value</td>
                                    <td id="transfer-operation-valueEth" data-type="ether-full" class="list-field"></td>
                                </tr>
                                <tr>
                                    <td>Date</td>
                                    <td id="transfer-tx-timestamp" data-type="localdate" class="list-field"></td>
                                </tr>
                                <tr>
                                    <td>Value @ tx date</td>
                                    <td id="historical-price" data-type="historical-price" class="list-field"></td>
                                </tr>
                                <tr>
                                    <td>From</td>
                                    <td id="transfer-operation-from" data-type="ethplorer" class="list-field"></td>
                                </tr>
                                <tr>
                                    <td>To</td>
                                    <td id="transfer-operation-to" data-type="ethplorer" class="list-field"></td>
                                </tr>
                                <tr>
                                    <td>Message</td>
                                    <td id="transfer-tx-message" class="list-field"></td>
                                </tr>
                                <tr id="operation-status">
                                    <td>Status</td>
                                    <td id="txTokenStatus" class="list-field"></td>
                                </tr>
                                </table>
                            </div>
                            <div class="text-center d-none d-md-block">
                                <a class="tx-details-link text-decoration-none">Transaction details</a>
                            </div>
                        </div>

                        <div class="col col-md-12 col-lg-6 token-related mb-4" id="token-information-block">
                            <div class="block">
                                <div class="block-header text-dark">
                                    <h3 class="h4">Token <span class="token-name mx-1"></span> Information</h3>
                                </div>
                                <table class="table m-0">
                                <tr>
                                    <td>Contract</td>
                                    <td id="transaction-token-contract" class="list-field" data-type="ethplorer" data-options="no-contract"></td>
                                </tr>
                                <tr>
                                    <td>Symbol</td>
                                    <td id="transaction-token-symbol" class="list-field"></td>
                                </tr>
                                <tr>
                                    <td>Price</td>
                                    <td id="transaction-token-price" data-type="price" class="list-field"></td>
                                </tr>
                                <tr>
                                    <td>Decimals</td>
                                    <td id="transaction-token-decimals" class="list-field"></td>
                                </tr>
                                <tr>
                                    <td>Owner</td>
                                    <td id="transaction-token-owner" data-type="ethplorer" class="list-field"></td>
                                </tr>
                                <tr>
                                    <td>Total Supply</td>
                                    <td id="transaction-token-totalSupply" class="list-field"></td>
                                </tr>
                                </table>
                            </div>
                            <div class="text-center d-block d-md-none">
                                <a class="tx-details-link text-decoration-none">Transaction details</a>
                            </div>
                        </div>
                    </div>

                    <div id="tx-details-block" style="display:none;" class="row mb-5">
                        <div class="col">
                            <div class="block">
                                <div class="block-header text-dark">
                                    <h3 class="h4">Transaction details</h3>
                                    <div class="tx-details-close">
                                        &times;
                                    </div>
                                </div>
                                <table class="table m-0">
                                <tr>
                                    <td>Tx</td>
                                    <td id="transaction-tx-hash" class="list-field" data-type="etherscan"></td>
                                </tr>
                                <tr>
                                    <td>Date</td>
                                    <td id="transaction-tx-timestamp" data-type="localdate" class="list-field"></td>
                                </tr>
                                <tr>
                                    <td>Message</td>
                                    <td id="transaction-tx-message" class="list-field"></td>
                                </tr>
                                <tr>
                                    <td>Block</td>
                                    <td id="transaction-tx-block">
                                        <span id="transaction-tx-blockNumber" class="list-field"></span> (<span id="transaction-tx-confirmations" class="list-field"></span> confirmations)
                                    </td>
                                </tr>
                                <tr>
                                    <td>From</td>
                                    <td id="transaction-tx-from" class="list-field" data-type="ethplorer"></td>
                                </tr>
                                <tr>
                                    <td>To</td>
                                    <td id="transaction-tx-to" class="list-field" data-type="ethplorer"></td>
                                </tr>
                                <tr>
                                    <td>Creates</td>
                                    <td id="transaction-tx-creates" class="list-field" data-type="ethplorer"></td>
                                </tr>
                                <tr>
                                    <td>Value</td>
                                    <td id="transaction-tx-value" class="list-field" data-type="ether-full"></td>
                                </tr>
                                <tr>
                                    <td>Gas Limit</td>
                                    <td id="transaction-tx-gasLimit" class="list-field" data-type="int"></td>
                                </tr>
                                <tr>
                                    <td>Gas Used</td>
                                    <td id="transaction-tx-gasUsed" class="list-field" data-type="int"></td>
                                </tr>
                                <tr>
                                    <td>Gas Price</td>
                                    <td id="transaction-tx-gasPrice" class="list-field" data-type="ether-gwei"></td>
                                 </tr>
                                 <tr>
                                    <td>Tx Cost</td>
                                    <td id="transaction-tx-cost" class="list-field" data-type="ether-full"></td>
                                </tr>
                                <tr>
                                    <td>Nonce</td>
                                    <td id="transaction-tx-nonce" class="list-field"></td>
                                </tr>
                                <tr id="tx-method">
                                    <td>Method</td>
                                    <td style="font-family: monospace;color:#f8f577;" id="transaction-tx-method" class="list-field text-left"></td>
                                </tr>
                                <tr id="tx-parsed">
                                    <td>Parsed Data</td>
                                    <td class="text-right">
                                        <pre id="transaction-tx-parsed" class="list-field text-left"></pre>
                                    </td>
                                </tr>
                                <tr>
                                    <td>Input Data</td>
                                    <td class="text-right">
                                        <a onclick="Ethplorer.convert('transaction-tx-input', this);" class="pre-switcher text-primary">ASCII</a>
                                        <pre id="transaction-tx-input" class="list-field text-left" data-mode="hex"></pre>
                                    </td>
                                </tr>
                                <tr id="tx-status">
                                    <td>Status</td>
                                    <td id="txEthStatus" class="list-field"></td>
                                </tr>
                                </table>
                            </div>
                        </div>
                    </div>
                </div>

                <div id="addressDetails" class="content-page">
                    <div class="row">
                        <div class="col-lg mb-4">
                            <div class="block">
                                <div class="block-header text-dark"><h3 class="h4"><span class="address-type mr-2"></span> Information</h3></div>
                                <table class="table m-0">
                                <tr>
                                    <td><span class="address-type"></span></td>
                                    <td id="address-address" data-type="etherscan" data-options="no-contract" class="list-field"></td>
                                </tr>
                                <tr>
                                    <td>Created At</td>
                                    <td id="address-token-createdAt" data-type="localdate" data-options="no-contract" class="list-field"></td>
                                </tr>
                                <tr>
                                    <td>Creator</td>
                                    <td id="address-contract-creator" data-type="ethplorer" data-options="no-contract" class="list-field"></td>
                                </tr>
                                <tr>
                                    <td>Create Tx</td>
                                    <td id="address-token-createdTx" data-type="ethplorer" class="list-field"></td>
                                </tr>
                                <tr id="addr-balance">
                                    <td>Balance</td>
                                    <td id="address-balance" data-type="ether-full" class="list-field"></td>
                                </tr>
                                <tr>
                                    <td>Total In</td>
                                    <td id="address-balanceIn" data-type="ether" class="list-field"></td>
                                </tr>
                                <tr>
                                    <td>Total Out</td>
                                    <td id="address-balanceOut" data-type="ether" class="list-field"></td>
                                </tr>
                                <tr>
                                    <td>Transactions</td>
                                    <td id="address-token-txsCount" data-type="int" class="list-field"></td>
                                </tr>
                                <tr>
                                    <td>Transactions</td>
                                    <td id="address-contract-txsCount" data-type="int" class="list-field"></td>
                                </tr>
                                </table>
                            </div>
                        </div>
                        <div class="col-lg mb-4">
                            <div class="block" id="address-token-balances">
                                <div class="block-header text-dark">
                                    <h3 class="h4">Balances <sup><i class="fa fa-question-circle fa-xs" data-toggle="tooltip" data-placement="right" title="ETH&nbsp;+&nbsp;Tokens"></i></sup>
                                        <div id="address-balances-total"></div>
                                    </h3>
                                </div>
                                <div class="scrollable"><div class="scrollwrapper"><table class="table m-0"></table></div></div>
                                <div class="text-center">
                                    <a class="expand-btn">Expand</a>
                                </div>
                            </div>
                            <div class="block" id="address-chainy-info">
                                <div class="block-header text-dark">
                                    <img src="/images/chainy.png?new" class="token-logo" align="left">
                                    <h3 class="h4">Chainy Information</h3>
                                </div>
                                <table class="table m-0">
                                <tr>
                                    <td style="padding-bottom: 12px;">
                                        Chainy is a smart contract which allows to create and read different kind of data in Ethereum blockchain:
                                        <br><br>
                                        <b>AEON short links</b><br>
                                        Irreplaceable short URLs (similar to bit.ly but impossible to change)
                                        <br><br>
                                        <b>Proof of Existence + Files</b><br>
                                        Permanent proof of existence of the document (file) together with link to the file at one page
                                        <br><br>
                                        <b>Broadcast Messages</b><br>
                                        Public text message on the Ethereum blockchain. Also may be encrypted
                                        <br><br>
                                        Read more: <a href="https://chainy.link" class="external-link" target="_blank">https://chainy.link</a><br>
                                        Post your data: <a href="https://chainy.link/add" class="external-link" target="_blank">https://chainy.link/add</a>
                                    </td>
                                </tr>
                                </table>
                            </div>
                            <div class="block" id="address-token-details">
                                <div class="block-header text-dark"><h3 class="h4">Token <span class="address-token-name mx-2"></span> Information</h3></div>
                                <table class="table m-0">
                                <tr>
                                    <td colspan="2" id="address-token-description" class="list-field"></td>
                                </tr>
                                <tr>
                                    <td>Symbol</td>
                                    <td id="address-token-symbol" class="list-field"></td>
                                </tr>
                                <tr>
                                    <td>Price</td>
                                    <td id="address-token-price" data-type="price" class="list-field"></td>
                                </tr>
                                <tr>
                                    <td>Total Supply</td>
                                    <td id="address-token-totalSupply" class="list-field"></td>
                                </tr>
                                {# <tr>
                                    <td>Total In</td>
                                    <td id="address-token-totalIn" class="list-field"></td>
                                </tr>
                                <tr>
                                    <td>Total Out</td>
                                    <td id="address-token-totalOut" class="list-field"></td>
                                </tr> #}
                                <tr>
                                    <td>Decimals</td>
                                    <td id="address-token-decimals" class="list-field"></td>
                                </tr>
                                <tr>
                                    <td>Owner</td>
                                    <td id="address-token-owner" data-type="ethplorer" class="list-field"></td>
                                </tr>
                                <tr>
                                    <td>Transfers</td>
                                    <td id="address-token-transfersCount" class="list-field"></td>
                                </tr>
                                <tr>
                                    <td>Issuances</td>
                                    <td id="address-token-issuancesCount" class="list-field"></td>
                                </tr>
                                <tr>
                                    <td>Holders</td>
                                    <td id="address-token-holdersCount" class="list-field"></td>
                                </tr>
                                </table>
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col mb-3">
                            <ul id="tokenTabs" class="nav nav-tabs" role="tablist">
                                <li class="nav-item">
                                    <a id="tab-transfers" class="nav-link active text-decoration-none" role="tab" data-toggle="tab" href="#token-transfers-tab" aria-controls="transfers" aria-selected="true"><span class="dashed">Transfers</span></a>
                                </li>
                                <li class="nav-item">
                                    <a id="tab-issuances" class="nav-link text-decoration-none" role="tab" data-toggle="tab" href="#token-issuances-tab" aria-controls="issuances" aria-selected="false"><span class="dashed">Issuances</span></a>
                                </li>
                                <li class="nav-item">
                                    <a id="tab-holders" class="nav-link text-decoration-none" role="tab" data-toggle="tab" href="#token-holders-tab" aria-controls="holders" aria-selected="false"><span class="dashed">Holders</span></a>
                                </li>
                            </ul>
                            <div class="filter-box d-flex align-items-center flex-wrap justify-content-end">
                                <form class="filter-form d-flex align-items-center">
                                    <span class="position-relative mb-2">
                                        <input id="filter_list" type="text" placeholder="Filter by address or hash" class="ml-2"/>
                                        <span class="filter-clear" title="Clear filter">&times;</span>
                                    </span>
                                </form>
                            </div>
                        </div>
                    </div>
                    <div class="tab-content" id="tokenTabsContent">
                        <div id="token-transfers-tab" class="tab-pane fade show active" role="tabpanel" aria-labelledby="tab-transfers">
                            <div class="col-xs-12 mb-4" id="address-token-transfers">
                                <div class="block">
                                    <div class="block-header text-dark">
                                        <h3 class="h4">Token <span class="address-token-name mx-2"></span> Transfers</h3>
                                        <div class="total-records"></div>
                                    </div>
                                    <table class="table m-0 layout-fixed layout-md-auto"></table>
                                </div>
                                <small>
                                    * all dates are displayed for
                                    <span class="local-time-offset"></span>
                                    timezone{{ csvExport|raw }}
                                </small>
                            </div>
                        </div>
                        <div id="token-issuances-tab" class="tab-pane fade" role="tabpanel" aria-labelledby="tab-issuances">
                            <div class="col-xs-12 mb-4" id="address-issuances">
                                <div class="block">
                                    <div class="block-header text-dark">
                                        <h3 class="h4">Token <span class="address-token-name mx-2"></span> Issuances</h3>
                                        <div class="total-records"></div>
                                    </div>
                                    <table class="table m-0 layout-fixed layout-md-auto"></table>
                                </div>
                                <small>* all dates are displayed for <span class="local-time-offset"></span> timezone</small>
                            </div>
                        </div>
                        <div id="token-holders-tab" class="tab-pane fade" role="tabpanel" aria-labelledby="tab-holders">
                            <div class="col-xs-12 mb-4" id="address-token-holders">
                                <div class="block">
                                    <div class="block-header text-dark">
                                        <h3 class="h4">Token <span class="address-token-name mx-2"></span> Holders</h3>
                                        <div class="total-records"></div>
                                    </div>
                                    <table class="table m-0 layout-fixed layout-md-auto"></table>
                                    <div id="address-token-holders-totals"></div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="col-xs-12 mb-4" id="address-transfers" style="display:none;">
                        <div class="block">
                            <div class="block-header text-dark">
                                <h3 class="h4">Transfers</h3>
                                <div class="total-records"></div>
                            </div>
                            <table class="table m-0 layout-fixed layout-md-auto"></table>
                        </div>
                        <small>
                            * all dates are displayed for
                            <span class="local-time-offset"></span>
                            timezone{{ csvExport|raw }}
                        </small>
                    </div>
                    <div class="col-xs-12 mb-4" id="address-chainy-tx" style="display:none;">
                        <div class="block">
                            <div class="block-header text-dark">
                                <h3 class="h4">Chainy Transactions</h3>
                                <div class="total-records"></div>
                            </div>
                            <table class="table m-0 layout-fixed layout-md-auto"></table>
                        </div>
                        <small>* all dates are displayed for <span class="local-time-offset"></span> timezone</small>
                    </div>
                </div>
                {% endif %}
    </div>
    {{ bottom|raw }}
    {% endverbatim %}

    <div id="qr-code-popup" title="Address QR-Code" style="padding:5px;"><span id="qr-code-address"></span><br/><br/><center><div id="qr-code"></div></center><br/></div>

    {% include '@components/disqus.twig' %}
{% endblock %}

